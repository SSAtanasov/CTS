# Конфигуриране на сървърно удостоверяване с TACACS+ и RADIUS

## Таблица с адресиране (Addressing Table)

| Устройство | Интерфейс | IP адрес | Маска на подмрежата | Стандартен шлюз | Порт на комутатора |
|---|---|---|---|---|---|
| R1 | G0/1 | 192.168.1.1 | 255.255.255.0 | N/A | S1 F0/1 |
| R1 | S0/0/0 (DCE) | 10.1.1.2 | 255.255.255.252 | N/A | N/A |
| R2 | G0/0 | 192.168.2.1 | 255.255.255.0 | N/A | S2 F0/2 |
| R2 | S0/0/0 | 10.1.1.1 | 255.255.255.252 | N/A | N/A |
| R2 | S0/0/1 (DCE) | 10.2.2.1 | 255.255.255.252 | N/A | N/A |
| R3 | G0/1 | 192.168.3.1 | 255.255.255.0 | N/A | S3 F0/5 |
| R3 | S0/0/1 | 10.2.2.2 | 255.255.255.252 | N/A | N/A |
| TACACS+ Server | NIC | 192.168.2.2 | 255.255.255.0 | 192.168.2.1 | S2 F0/6 |
| RADIUS Server | NIC | 192.168.3.2 | 255.255.255.0 | 192.168.3.1 | S3 F0/1 |
| PC-A | NIC | 192.168.1.3 | 255.255.255.0 | 192.168.1.1 | S1 F0/2 |
| PC-B | NIC | 192.168.2.3 | 255.255.255.0 | 192.168.2.1 | S2 F0/1 |
| PC-C | NIC | 192.168.3.3 | 255.255.255.0 | 192.168.3.1 | S3 F0/18 |

## Цели

- Конфигуриране на сървърно AAA удостоверяване с използване на TACACS+
- Проверка на сървърно AAA удостоверяване от клиента PC-B
- Конфигуриране на сървърно AAA удостоверяване с използване на RADIUS
- Проверка на сървърно AAA удостоверяване от клиента PC-C

## Контекст / Сценарий

Мрежовата топология показва рутерите R1, R2 и R3. В момента цялата административна сигурност се основава на познаването на паролата за привилегирован режим (enable secret password). Вашата задача е да конфигурирате и тествате локални и сървърни решения за AAA.

Ще конфигурирате рутер R2 да поддържа сървърно удостоверяване с използване на протокола TACACS+. TACACS+ сървърът е предварително конфигуриран със следното:
- Клиент: R2, използващ ключовата дума tacacspa55
- Потребителски профил: Admin2 и парола admin2pa55

Накрая ще конфигурирате рутер R3 да поддържа сървърно удостоверяване с използване на протокола RADIUS. RADIUS сървърът е предварително конфигуриран със следното:
- Клиент: R3, използващ ключовата дума radiuspa55
- Потребителски профил: Admin3 и парола admin3pa55

Рутерите също са предварително конфигурирани със следното:
- Парола за привилегирован режим (enable secret): ciscoenpa55
- Протокол за маршрутизация OSPF с MD5 удостоверяване, използващ парола: MD5pa55

**Забележка:** Конзолните и виртуални терминални линии (vty lines) не са предварително конфигурирани.

**Забележка:** По-новите IOS образи използват по-сигурен алгоритъм за хеширане; въпреки това версията на IOS, която в момента се поддържа в Packet Tracer, използва MD5. Винаги използвайте най-сигурната опция, налична на вашето физическо оборудване.

## Част I: Конфигуриране на сървърно AAA удостоверяване с използване на TACACS+ на R2

### Стъпка 1: Тестване на свързаността (connectivity)

- Изпратете ping от PC-A до PC-B
- Изпратете ping от PC-A до PC-C
- Изпратете ping от PC-B до PC-C

### Стъпка 2: Конфигуриране на резервен запис в локалната база данни с име Admin

За резервни цели конфигурирайте локално потребителско име Admin2 и таен парола admin2pa55.

### Стъпка 3: Проверка на конфигурацията на TACACS+ сървъра

Щракнете върху TACACS+ Server. На раздела Services щракнете върху AAA. Забележете, че има запис за мрежова конфигурация (Network configuration) за R2 и запис за настройка на потребител (User Setup) за Admin2.

### Стъпка 4: Конфигуриране на специфичните настройки за TACACS+ сървъра на R2

Конфигурирайте IP адреса на AAA TACACS сървъра и секретния ключ на R2.

**Забележка:** Командите `tacacs-server host` и `tacacs-server key` са остарели (deprecated). В момента Packet Tracer не поддържа новата команда `tacacs server`.

```
R2(config)# tacacs-server host 192.168.2.2
R2(config)# tacacs-server key tacacspa55
```

### Стъпка 5: Конфигуриране на AAA удостоверяване при влизане за конзолен достъп на R2

Активирайте AAA на R2 и конфигурирайте всички влизания да се удостоверяват с помощта на AAA TACACS+ сървъра. Ако той не е наличен, тогава използвайте локалната база данни.

### Стъпка 6: Конфигуриране на конзолната линия да използва дефинирания AAA метод за удостоверяване

Конфигурирайте AAA удостоверяване за конзолно влизане, за да използва стандартния AAA метод за удостоверяване.

### Стъпка 7: Проверка на AAA метода за удостоверяване

Проверете влизането в потребителски режим EXEC с помощта на AAA TACACS+ сървъра.

## Част II: Конфигуриране на сървърно AAA удостоверяване с използване на RADIUS на R3

### Стъпка 1: Конфигуриране на резервен запис в локалната база данни с име Admin

За резервни цели конфигурирайте локално потребителско име Admin3 и таен парола admin3pa55.

### Стъпка 2: Проверка на конфигурацията на RADIUS сървъра

Щракнете върху RADIUS Server. На раздела Services щракнете върху AAA. Забележете, че има запис за мрежова конфигурация (Network configuration) за R3 и запис за настройка на потребител (User Setup) за Admin3.

### Стъпка 3: Конфигуриране на специфичните настройки за RADIUS сървъра на R3

Конфигурирайте IP адреса на AAA RADIUS сървъра и секретния ключ на R3.

**Забележка:** Командите `radius-server host` и `radius-server key` са остарели (deprecated). В момента Packet Tracer не поддържа новата команда `radius server`.

```
R3(config)# radius-server host 192.168.3.2
R3(config)# radius-server key radiuspa55
```

### Стъпка 4: Конфигуриране на AAA удостоверяване при влизане за конзолен достъп на R3

Активирайте AAA на R3 и конфигурирайте всички влизания да се удостоверяват с помощта на AAA RADIUS сървъра. Ако той не е наличен, тогава използвайте локалната база данни.

### Стъпка 5: Конфигуриране на конзолната линия да използва дефинирания AAA метод за удостоверяване

Конфигурайте AAA удостоверяване за конзолно влизане, за да използва стандартния AAA метод за удостоверяване.

### Стъпка 6: Проверка на AAA метода за удостоверяване

Проверете влизането в потребителски режим EXEC с помощта на AAA RADIUS сървъра.

### Стъпка 7: Проверка на резултатите

Вашият процент на завършеност трябва да бъде 100%. Щракнете върху „Check Results", за да видите обратна връзка и проверка на кои задължителни компоненти са завършени.

---

## Речник на термините

**AAA** - Authentication, Authorization, and Accounting (Удостоверяване, упълномощаване и отчитане)

**TACACS+** - Terminal Access Controller Access-Control System Plus (система за контрол на достъпа на терминален контролер за достъп)

**RADIUS** - Remote Authentication Dial-In User Service (отдалечена услуга за удостоверяване на потребители при комутируемо свързване)

**NIC** - Network Interface Card (мрежова интерфейсна карта)

**DCE** - Data Communications Equipment (оборудване за предаване на данни)

**OSPF** - Open Shortest Path First (отворен протокол „първо най-краткия път")

**MD5** - Message Digest 5 (алгоритъм за хеширане)

**vty lines** - Virtual Terminal Lines (виртуални терминални линии)
